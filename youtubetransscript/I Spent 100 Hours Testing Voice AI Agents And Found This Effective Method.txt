Detected language: en

 what is the one most common issue or problem that you see or face when you are creating or dealing with any voice AI agent platform, especially as a developer. You know what? Let me actually show you that on the screen. Before you go, I was wondering if you left out some special treats for me and my reindeer. I heard something about chocolate chip cookies and milk on Thank you. I need to go on. I'll see you later. I must be off. But I'll be thinking of you on my journey around the world tonight. Merry Christmas. Merry Christmas. Thank you, center. Bye. Oh, it was my pleasure, Avidjit. I'm glad I could chat with you a bit before I head out. Remember, I'll be thinking of you and your family tonight as I make my way around the world, delivering presents. Don't forget to go to bed early and leave out those treats. And I'll see you this Christmas. Bye. Oh, oh, oh, see you soon, Avidjit. No, the problem is the AI agent is still listening. Although it has said bye. As you'll see that, right? Hey, center, are you still there? Oh, oh, oh, oh, dear. It seems like there's been a little mix-up. I'm Santa Claus, not Sandra. I'm still here and I'm excited to keep chatting with you. So that is a problem. And this is actually if you find in the internet, it is one of the most common problem that any AI agencies or any of the YSAI system that people are using are facing. This actually costs two things. One, it doesn't look like production ready. Second thing is it actually makes the AI token cost go to here. If you cannot handle this and the third thing is sometimes if you are using system like LiveKit, you are actually keeping one of the WSS connection open always, even though there is no need to. So we can actually handle that. I'm just going to show you in this video how easy it is to actually handle this through LiveKit. So let me go back to my code editor and I'll just show you how exactly you can solve this very easily. Now I am in the code editor and I'm just going to show you two quick sections that I have added into my LiveKit or the agent side of the code to fix this. And this is very simple as I have said and you could do that with any LiveKit-based agent system that I have shown you previously in this channel. First is this block of the code and the second is this block of the code. Now let me go through quickly one by one. So what this block of the code is doing? It is basically it is looking for an event. Now as LiveKit servers or LiveKit agents are running based on events. So it's basically checking for events when agent speech is committed. There are different kinds of events or phases of events based on which LiveKit agent actually runs. For example, the user is speaking when the user has completed the speaking when agent have processing or when agent have completed is speaking or when agent have created the AI output and then the final step is when the agent have committed the speech. So what we are doing is we are adding this particular decorator which is called assistant.on and we are saying when the agent speech is completed or it's committed then what we are basically doing we are saying asynchronously we are going to check whether the conversation should end or not. So we are using async.create task. So async.create task will actually create an asynchronous task. So that means this particular task is going to be a non-blocking in nature. So it's not going to interact or impact the actual agent flow as the user will communicate. So with each and every communication going back and forth a task will be created which will check whether the conversation should end or not. We will go to this particular method check conversation end. So this is the check conversation end method and this check conversation end is basically just first listing all the participants that is in the room and then it is basically checking if we should remove the participant. So before it does the removal what it does it's here it checks it's a Boolean flag basically. It basically checks whether it should actually end the conversation or not or whether it should actually remove the participant or not. So that is why it's calling now the check conversation complete method. Now we will see the check conversation complete method and in the check conversation complete method again we are using async.create us open AI module not the normal open AI module. So this is because everything has to be asynchronous and everything has to be running in parallel or in a separate thread as part of non blocking nature otherwise your AI agent will have latency when it will speak with the user. And it's basically doing very simple thing that we are saying you are analyzing if the conversation should end or not the respond only with ended or continue and based on that when we are just providing the content that is the speech history and based on that basically we are getting the response. So the response will be either continue or ended if it is ended then we are just sending that it is ended and it's basically going to send a Boolean respond as true and when it will send it as true then basically this if should end will be executed and then it will find the participants from the live kid room where agent and the client is speaking and then it will basically remove all the participants and as a result the communication will end. So let's test it with these changes and see how it will work in a real life scenario. So I'm just going to hit Docker Compose up minus build so this will actually take these changes that I have done now and you will start the agent. So the agent is now in the running state it is initiated and now you will go back and test it. Oh, oh, oh, Mary Christmas. This is Santa Claus. Now I have to actually go. Would you mind me excuse me please? Oh, I think I see what's happening here. Well, I won't keep you from your Christmas magic. But before you go can I just take a peek at your wonderful cookies and treats? Sure Santa. Oh, oh, oh, oh, I'll send them right over. Poof! I think the Christmas magic is working its way through the portal. Yes, I see your cookies and treats are simply delightful. You've got some of my favorite snacks. And as you see now it has automatically got disconnected because in the last message I saw I told that I need to go and the agent have now tracked that conversation is over and it has disconnected immediately that particular interaction. And I have also implemented this feature which I call as red detected silence mode. And basically when there is no communication it will automatically shut down. Santa agent is meant to be talking with children. I had to be very, very careful about different features that needed to be implemented. For example, the child may not be interested in talking with the Santa after a few lines back and forth communication or he or she might get free-tanned. There could be parents who can take over and just ask Santa to go down. So all these features that I had to think of when I was designing this particular application. So I had created bunch of features thinking of all those scenarios. Now this was just one of many other issues that you need to think and sort out when you're planning to create or deal with any voice agent platform. And as I was just telling you the Santa agent I have created which you would have probably also seen in the last video was created to speak with children. So that means I really have to be extra extra careful. Now in the upcoming Sunday I am hosting a live stream to discuss most of these challenges to my SAS course members who have already pre-joined the course. And there is only about five slot that is remaining before the SAS course price is going up again after the Sunday session from the next week. So with the course you would not only learn how to develop a SAS, you will also learn phase by phase up to launch. So before the course price increases I would really encourage you to grab the opportunity now. Click the link and get the course because in the next lives there will be all new production features that we'll be discussed. If you don't want to buy the course you could still support me in the channel by taking the membership and all inside Explorer and above community member will have access to that particular meeting that is coming on upcoming Sunday. So I hope to see you on Sunday and with that I'm going to end this particular session and I'm going to bring more such videos on this particular live stream implementation slowly in this channel. So I hope to see you soon. Take care and peace out. Bye.